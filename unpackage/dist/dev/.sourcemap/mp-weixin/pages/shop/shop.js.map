{"version":3,"file":"shop.js","sources":["pages/shop/shop.vue","E:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2hvcC9zaG9wLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<pageBack :titleInfo=\"titleInfo\"></pageBack>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"container\">\r\n\t\t\t<!-- ceshi -->\r\n\t\t\t<view class=\"shopName\">\r\n\t\t\t\t<view class=\"shopTitle\">\r\n\t\t\t\t\t妈祖周边文创\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"shopEngTitle\">\r\n\t\t\t\t\tCultural around Mazu\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"input\">\r\n\t\t\t\t<input type=\"text\" />\r\n\t\t\t\t<image src=\"../../static/shop/search.png\" mode=\"\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"recommend\">\r\n\t\t\t\t<view v-for=\"(item, index) in gridList\" :key=\"index\" :class=\"{ active: activeIndex === index }\"\r\n\t\t\t\t\t@click=\"setActiveGrid(index,item)\">\r\n\t\t\t\t\t{{ item.grid }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<swiper style=\"height: 370rpx;margin-bottom: 40rpx;\" :autoplay=\"true\" :interval=\"5000\" :duration=\"400\">\r\n\t\t\t\t<swiper-item v-for=\"item in recommendList\" :key=\"item.id\">\r\n\t\t\t\t\t<view class=\"recommendItem\">\r\n\t\t\t\t\t\t<view class=\"item\" @click=\"toShowDetail(item.id)\">\r\n\t\t\t\t\t\t\t<view class=\"itemImage\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.imageUrl[0]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"itemText\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t\t{{item.shopname}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t\t\t暂未介绍...敬请期待\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t<text>香火值</text>{{item.price.toFixed(2)}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t兑换\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<!-- ceshi -->\r\n\t\t\t<view class=\"shop\">\r\n\t\t\t\t<view class=\"pubuBox\">\r\n\t\t\t\t\t<view class=\"pubuItem\">\r\n\t\t\t\t\t\t<!-- v-for列表循环 -->\r\n\t\t\t\t\t\t<view class=\"item-masonry\" v-for=\"(item, index) in list\" :key=\"index\"\r\n\t\t\t\t\t\t\t@click=\"toShowDetail(item.id)\">\r\n\t\t\t\t\t\t\t<image :lazy-load=\"true\" :src=\"item.imageUrl[0]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t<view class=\"listtitle\"> <!-- 这是没有高度的父盒子（下半部分） -->\r\n\t\t\t\t\t\t\t\t<view class=\"listtitle2\">\r\n\t\t\t\t\t\t\t\t\t{{ item.shopname }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"listtitle3\">\r\n\t\t\t\t\t\t\t\t\t<text>香火值</text>{{item.price.toFixed(2)}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t<incense-fab></incense-fab>\r\n\t<tabBar></tabBar>\r\n</template>\r\n\r\n<script>\r\n\timport pageBack from \"/components/title/title.vue\";\r\n\timport tabBar from \"/components/tabbar/tabbar.vue\";\r\n\timport IncenseFab from '/components/incense-fab/incense-fab.vue';\r\n\timport {\r\n\t\tgetShopListAPI,\r\n\t\tgetShopGridAPI,\r\n\t\tgridSearchShopAPI\r\n\t} from '/apis/shop.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitleInfo: {\r\n\t\t\t\t\ttitleShow: true,\r\n\t\t\t\t\ttitle: \"商城\",\r\n\t\t\t\t\timageUrl: \"http://t73sifiwt.hn-bkt.clouddn.com/pageBack/1.webp\",\r\n\t\t\t\t\theightShow: false,\r\n\t\t\t\t\tbackShow: false\r\n\t\t\t\t},\r\n\t\t\t\tlist: [],\r\n\t\t\t\trecommendList: [],\r\n\t\t\t\tgridList: [],\r\n\t\t\t\tactiveIndex: 0,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getShopList()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.setActiveGrid(0, {\r\n\t\t\t\tgrid: '全部'\r\n\t\t\t});\r\n\t\t\tthis.getGrid()\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tpageBack,\r\n\t\t\ttabBar,\r\n\t\t\tIncenseFab\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 洗牌算法 进行随机操作\r\n\t\t\trandomRecommendList(count) {\r\n\t\t\t\tconst shuffled = [...this.list];\r\n\t\t\t\tfor (let i = shuffled.length - 1; i > 0; i--) {\r\n\t\t\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t\t\t[shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n\t\t\t\t}\r\n\t\t\t\treturn shuffled.slice(0, count);\r\n\t\t\t},\r\n\t\t\tsetActiveGrid(index, item) {\r\n\t\t\t\tthis.activeIndex = index;\r\n\t\t\t\tgridSearchShopAPI(\r\n\t\t\t\t\titem.grid\r\n\t\t\t\t).then((res) => {\r\n\t\t\t\t\tthis.list = res.message.map((item) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\timageUrl: JSON.parse(item.imageUrl)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取种类\r\n\t\t\tgetGrid() {\r\n\t\t\t\tgetShopGridAPI().then((res) => {\r\n\t\t\t\t\tconst filteredList = res.message.filter(item => item.grid !== '其他');\r\n\t\t\t\t\t// 随机打乱数组的函数\r\n\t\t\t\t\tconst shuffleArray = (array) => {\r\n\t\t\t\t\t\tfor (let i = array.length - 1; i > 0; i--) {\r\n\t\t\t\t\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t\t\t\t\t[array[i], array[j]] = [array[j], array[i]]; // 交换元素\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn array;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// 打乱过滤后的数据\r\n\t\t\t\t\tconst shuffledList = shuffleArray(filteredList);\r\n\t\t\t\t\tconst selectedItems = shuffledList.slice(0, 3);\r\n\t\t\t\t\tthis.gridList = [{\r\n\t\t\t\t\t\tgrid: '全部'\r\n\t\t\t\t\t}, ...selectedItems, {\r\n\t\t\t\t\t\tgrid: '其他'\r\n\t\t\t\t\t}];\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取商品数据\r\n\t\t\tgetShopList() {\r\n\t\t\t\tgetShopListAPI().then((res) => {\r\n\t\t\t\t\tthis.list = res.message.map((item) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\timageUrl: JSON.parse(item.imageUrl)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.recommendList = this.randomRecommendList(5);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取商品页面\r\n\t\t\ttoShowDetail(id) {\r\n\t\t\t\tconsole.log(id);\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/secondPages/shopDetail/shopDetail?shopId=${id}`\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tif (e.scrollTop >= 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = true\r\n\t\t\t}\r\n\t\t\tif (e.scrollTop < 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = false\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.container {\r\n\t\tpadding-bottom: 200rpx;\r\n\t\tposition: relative;\r\n\t\ttop: 200rpx;\r\n\t\twidth: 100%;\r\n\t\tmin-height: 300rpx;\r\n\t\tbackground-color: rgb(255, 251, 241);\r\n\t\tborder-radius: 40rpx 40rpx 0 0;\r\n\t\toverflow: hidden;\r\n\r\n\t\t// 瀑布流\r\n\t\t.shop {\r\n\t\t\twidth: 95%;\r\n\t\t\tmargin: auto;\r\n\t\t\tfont-family: \"阿里妈妈方圆体 VF Regular\";\r\n\r\n\t\t\t.pubuItem {\r\n\t\t\t\tcolumn-count: 2;\r\n\t\t\t\tcolumn-gap: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.item-masonry {\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tborder-radius: 15rpx;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tbreak-inside: avoid;\r\n\t\t\t\t/*避免在元素内部插入分页符*/\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\tbox-shadow: 0px 0px 28rpx 1rpx rgba(78, 101, 153, 0.07);\r\n\t\t\t}\r\n\r\n\t\t\t.item-masonry image {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t.listtitle {\r\n\t\t\t\tpadding: 22rpx;\r\n\t\t\t\tpadding-top: 10rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\r\n\t\t\t\t.listtitle1 {\r\n\t\t\t\t\tline-height: 39rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.listtitle3 {\r\n\t\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\t\tline-height: 32rpx;\r\n\t\t\t\t\tcolor: rgb(170, 0, 0);\r\n\t\t\t\t\tpadding-top: 22rpx;\r\n\r\n\t\t\t\t\ttext {\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.shopName {\r\n\t\tfont-family: \"阿里妈妈方圆体 VF Regular\";\r\n\t\t// font-weight: 600;\r\n\t\tpadding: 40rpx 20rpx;\r\n\t\tcolor: #4d0000;\r\n\r\n\t\t.shopTitle {\r\n\t\t\tfont-size: 60rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\r\n\t\t.shopEngTitle {\r\n\t\t\tmargin-top: 5rpx;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.input {\r\n\t\tfont-family: \"阿里妈妈方圆体 VF Regular\";\r\n\t\twidth: 95%;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #FFFBF2;\r\n\t\tmargin: auto;\r\n\t\tborder-radius: 20rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\t// margin-top: -20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t\tbackground-color: #fff;\r\n\t\tbox-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px;\r\n\r\n\t\tinput {\r\n\t\t\tpadding-left: 100rpx;\r\n\t\t\twidth: 80%;\r\n\t\t\tcolor: #4d0000;\r\n\t\t}\r\n\r\n\t\timage {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 52rpx;\r\n\t\t\theight: 52rpx;\r\n\t\t\tleft: 4%;\r\n\t\t}\r\n\t}\r\n\r\n\t.recommend {\r\n\t\twidth: 95%;\r\n\t\tmargin: auto;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tcolor: #4d0000;\r\n\t\tfont-family: \"阿里妈妈方圆体 VF Regular\" !important;\r\n\r\n\t\tview {\r\n\t\t\twidth: 17%;\r\n\t\t\tpadding: 15rpx 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tfont-size: 28rpx;\r\n\r\n\t\t\t&.active {\r\n\t\t\t\t// padding: 10rpx 40rpx;\r\n\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t\t// transition: background-color 0.3s, top: \t\t;ransform 0.3s; // 添加过渡效果\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.recommendItem {\r\n\t\tfont-family: \"阿里妈妈方圆体 VF Regular\" !important;\r\n\t\twidth: 95%;\r\n\t\theight: 350rpx;\r\n\t\tmargin: auto;\r\n\t\tborder-radius: 40rpx !important;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;\r\n\r\n\t\t.item {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\r\n\r\n\t\t\t.itemImage {\r\n\t\t\t\ttransform: scale(0.95);\r\n\t\t\t\twidth: 50%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 300rpx;\r\n\t\t\t\t\theight: 300rpx;\r\n\t\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.itemText {\r\n\t\t\t\ttransform: scale(0.95);\r\n\t\t\t\twidth: 50%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\t// display: flex;\r\n\t\t\t\t// flex-direction: column;\r\n\t\t\t\t// justify-content: space-around;\r\n\r\n\t\t\t\t.title {\r\n\t\t\t\t\twidth: 320rpx;\r\n\t\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\t\tcolor: #4d0000;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\tline-height: 100rpx;\r\n\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\tpadding-right: 5%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.info {\r\n\t\t\t\t\theight: 45%;\r\n\t\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.price {\r\n\t\t\t\t\theight: 25%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\twidth: 95%;\r\n\r\n\t\t\t\t\t.left {\r\n\t\t\t\t\t\tcolor: rgb(170, 0, 0);\r\n\t\t\t\t\t\tfont-size: 40rpx;\r\n\r\n\t\t\t\t\t\ttext {\r\n\t\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.right {\r\n\t\t\t\t\t\tpadding: 10rpx 25rpx;\r\n\t\t\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/01前端学习/01fzhx/mazu-2/mazu-2/mazu-前端小程序/pages/shop/shop.vue'\nwx.createPage(MiniProgramPage)"],"names":["gridSearchShopAPI","item","uni"],"mappings":";;;;;;;;EAsFE,OAAA;AACC,WAAA;AAAA;QAEE,WAAA;AAAA;QAEA,UAAA;AAAA,QACA,YAAA;AAAA;;MAGD,MAAA,CAAA;AAAA,MACA,eAAA,CAAA;AAAA;;;;EAKF,SAAA;AACC,SAAA,YAAA;AAAA;EAED,SAAA;AACC,SAAA,cAAA,GAAA;AAAA,MACC,MAAA;AAAA,IACD,CAAA;;;;IAIA;AAAA,IACA;AAAA,IACA;AAAA;EAED,SAAA;AAAA;AAAA;;AAIE,eAAA,IAAA,SAAA,SAAA,GAAA,IAAA,GAAA,KAAA;AACC,cAAA,IAAA,KAAA,MAAA,KAAA,YAAA,IAAA,EAAA;;MAED;;;;;AAKAA,gBAAA;AAAA,QACC,KAAA;AAAA,MACD,EAAA,KAAA,CAAA,QAAA;AACC,aAAA,OAAA,IAAA,QAAA,IAAA,CAAAC,UAAA;AACC,iBAAA;AAAA,YACC,GAAAA;AAAA,YACA,UAAA,KAAA,MAAAA,MAAA,QAAA;AAAA,UACD;AAAA;;;;IAKH,UAAA;;;;AAKG,mBAAA,IAAA,MAAA,SAAA,GAAA,IAAA,GAAA,KAAA;AACC,kBAAA,IAAA,KAAA,MAAA,KAAA,YAAA,IAAA,EAAA;AACA,aAAA,MAAA,CAAA,GAAA,MAAA,CAAA,CAAA,IAAA,CAAA,MAAA,CAAA,GAAA,MAAA,CAAA,CAAA;AAAA,UACD;;;AAID,cAAA,eAAA,aAAA,YAAA;AACA,cAAA,gBAAA,aAAA,MAAA,GAAA,CAAA;AACA,aAAA,WAAA,CAAA;AAAA,UACC,MAAA;AAAA,QACD,GAAA,GAAA,eAAA;AAAA,UACC,MAAA;AAAA,QACD,CAAA;AAAA;;;;;AAMA,aAAA,OAAA,IAAA,QAAA,IAAA,CAAA,SAAA;AACC,iBAAA;AAAA,YACC,GAAA;AAAA,YACA,UAAA,KAAA,MAAA,KAAA,QAAA;AAAA,UACD;AAAA;;;;;IAMH,aAAA,IAAA;;AAECC,oBAAAA,MAAA,WAAA;AAAA;;IAGD;AAAA;EAED,aAAA,GAAA;AACC,QAAA,EAAA,aAAA,IAAA;;IAEA;AACA,QAAA,EAAA,YAAA,IAAA;AACC,WAAA,UAAA,aAAA;AAAA,IACD;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzLH,GAAG,WAAW,eAAe;"}