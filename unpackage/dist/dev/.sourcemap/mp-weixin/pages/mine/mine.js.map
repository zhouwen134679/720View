{"version":3,"file":"mine.js","sources":["pages/mine/mine.vue","E:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWluZS9taW5lLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"shade\" v-if=\"shade\">\r\n\t\t<image class=\"one\" v-show=\"one\" src=\"../../static/红包.svg\" mode=\"\" @click=\"toTwo\"></image>\r\n\t\t<image class=\"two\" v-show=\"two\" src=\"../../static/红包2.svg\" mode=\"\" @click=\"end\"></image>\r\n\t</view>\r\n\t<pageBack :titleInfo=\"titleInfo\"></pageBack>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"container\">\r\n\t\t\t<view class=\"userInfo\" v-if=\"userInfo && Object.keys(userInfo).length > 0\">\r\n\t\t\t\t<view class=\"userHeader\">\r\n\t\t\t\t\t<view class=\"headerLeft\" @click=\"toSet\">\r\n\t\t\t\t\t\t<image :src=\"userInfo.avatarurl\" mode=\"\"></image>\r\n\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t{{userInfo.nickname}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t已连续签到{{signDays}}天\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t当前香火值：{{userInfo.balance}} 点\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"headerRight\" @click=\"signIn()\">\r\n\t\t\t\t\t\t<!-- 立即签到 -->\r\n\t\t\t\t\t\t立即签到\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"userInfo\" v-else>\r\n\t\t\t\t<view class=\"login\">\r\n\t\t\t\t\t<view class=\"loginBtn\" @click=\"toLogin\">\r\n\t\t\t\t\t\t立即登录\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"set\">\r\n\t\t\t\t<view class=\"item\" v-for=\"item in otherPage\" @click=\"toPage(item.id,item.url)\">\r\n\t\t\t\t\t<view class=\"itemLeft\">\r\n\t\t\t\t\t\t<image :src=\"item.svg\" mode=\"\"></image>\r\n\t\t\t\t\t\t{{item.name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"itemRight\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t<incense-fab></incense-fab>\r\n\t<tabBar></tabBar>\r\n\t<!-- \t<view class=\"sign\" v-if=\"sign\">\r\n\t\t<image v-if=\"signSuccess\" src=\"../../static/签到成功.svg\" mode=\"\"></image>\r\n\t\t<image v-if=\"signError\" src=\"../../static/error.svg\" mode=\"\"></image>\r\n\t</view> -->\r\n</template>\r\n\r\n<script>\r\n\timport pageBack from \"/components/title/title.vue\";\r\n\timport tabBar from \"/components/tabbar/tabbar.vue\";\r\n\timport IncenseFab from '/components/incense-fab/incense-fab.vue';\r\n\timport {\r\n\t\tuseUserInfoStore\r\n\t} from \"@/store/userInfo.js\"\r\n\timport {\r\n\t\tcheckBalanceZeroAPI,\r\n\t\taddBalanceAPI,\r\n\t\tsignInAPI,\r\n\t\tgetContinuousSignInDaysAPI\r\n\t} from \"../../apis/user.js\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitleInfo: {\r\n\t\t\t\t\ttitleShow: true,\r\n\t\t\t\t\ttitle: \"我的\",\r\n\t\t\t\t\timageUrl: \"http://t73sifiwt.hn-bkt.clouddn.com/pageBack/2.webp\",\r\n\t\t\t\t\theightShow: false,\r\n\t\t\t\t\theight: 100\r\n\t\t\t\t},\r\n\t\t\t\totherPage: [{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tname: \"我的订单\",\r\n\t\t\t\t\t\tsvg: \"/static/mine/order.svg\",\r\n\t\t\t\t\t\turl: \"/secondPages/myOrder/myOrder\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\tname: \"我的证书\",\r\n\t\t\t\t\t\tsvg: \"/static/mine/order.svg\",\r\n\t\t\t\t\t\turl: \"/secondPages/myCertificate/myCertificate\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \tid: 2,\r\n\t\t\t\t\t// \tname: \"我的收藏\",\r\n\t\t\t\t\t// \tsvg: \"/static/mine/hezuo.svg\",\r\n\t\t\t\t\t// \turl: \"/secondPages/agreement/agreement\"\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tname: \"游览历史\",\r\n\t\t\t\t\t\tsvg: \"/static/mine/history.svg\",\r\n\t\t\t\t\t\turl: \"/secondPages/tourHistory/tourHistory\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\tname: \"联系开发者\",\r\n\t\t\t\t\t\tsvg: \"/static/mine/kaifa.svg\",\r\n\t\t\t\t\t\turl: \"/secondPages/contact/contact\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\tname: \"账户设置\",\r\n\t\t\t\t\t\tsvg: \"/static/mine/set.svg\",\r\n\t\t\t\t\t\turl: \"/secondPages/accountSet/accountSet\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 6,\r\n\t\t\t\t\t\tname: \"我的发布\",\r\n\t\t\t\t\t\tsvg: \"/static/mine/post.svg\",\r\n\t\t\t\t\t\turl: \"/secondPages/myPost/myPost\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tuserInfo: {},\r\n\t\t\t\tshade: false,\r\n\t\t\t\tone: false,\r\n\t\t\t\ttwo: false,\r\n\t\t\t\tsignSuccess: false,\r\n\t\t\t\tsignError: false,\r\n\t\t\t\tsign: false,\r\n\t\t\t\tsignDays: \"\"\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tpageBack,\r\n\t\t\ttabBar,\r\n\t\t\tIncenseFab\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.userInfo = useUserInfoStore().$state.userInfo\r\n\t\t\tcheckBalanceZeroAPI(this.userInfo.openid).then((res) => {\r\n\t\t\t\tthis.shade = !res.message\r\n\t\t\t\tthis.one = !res.message\r\n\t\t\t})\r\n\t\t\tthis.getDays()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetDays() {\r\n\t\t\t\tgetContinuousSignInDaysAPI(this.userInfo.openid).then(res => {\r\n\t\t\t\t\tthis.signDays = res.continuousDays\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoTwo() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: \"开启红包中\"\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.clearStorage(),\r\n\t\t\t\t\t\tuni.hideLoading(),\r\n\t\t\t\t\t\tthis.one = false,\r\n\t\t\t\t\t\tthis.two = true,\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"红包开启成功\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\tend() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: \"领取中\"\r\n\t\t\t\t})\r\n\t\t\t\taddBalanceAPI(this.userInfo.openid).then((res) => {\r\n\t\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.userInfo.balance = 10000;\r\n\t\t\t\t\t\tthis.two = false;\r\n\t\t\t\t\t\tthis.shade = false;\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"恭喜你领取成功！\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.two = false,\r\n\t\t\t\t\t\t\tthis.shade = false,\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"领取失败\",\r\n\t\t\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsignIn() {\r\n\t\t\t\tsignInAPI(this.userInfo.openid).then((res) => {\r\n\t\t\t\t\tif (res.status == 2002) {\r\n\t\t\t\t\t\tthis.getDays()\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: \"提示\",\r\n\t\t\t\t\t\t\tcontent: \"签到成功\",\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getDays()\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: \"提示\",\r\n\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoLogin() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/pages/login/login\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tloginOut() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: \"退出登录中\"\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.clearStorage(),\r\n\t\t\t\t\t\tthis.userInfo = {},\r\n\t\t\t\t\t\tuseUserInfoStore().$reset(),\r\n\t\t\t\t\t\tuni.hideLoading(),\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"成功退出登录\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\ttoSet() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/secondPages/accountSet/accountSet\",\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoPage(id, url) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: url\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tif (e.scrollTop >= 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = true\r\n\t\t\t}\r\n\t\t\tif (e.scrollTop < 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = false\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.sign {\r\n\t\tposition: absolute;\r\n\t\tz-index: 999;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\ttop: 0%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\r\n\t\timage {\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin-bottom: 200rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.shade {\r\n\t\tposition: absolute;\r\n\t\tz-index: 999;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.8);\r\n\t\tjustify-content: center;\r\n\r\n\t\timage {\r\n\t\t\twidth: 100%;\r\n\t\t\ttransform: scale(1.5);\r\n\t\t\tmargin-bottom: 200rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.container {\r\n\t\tposition: relative;\r\n\t\ttop: 200rpx;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #FFFBF2;\r\n\t\tborder-radius: 40rpx 40rpx 0 0;\r\n\t\tfont-family: \"阿里妈妈方圆体 VF Regular\";\r\n\r\n\t\t.userInfo {\r\n\t\t\tpadding: 40rpx 0;\r\n\t\t\twidth: 95%;\r\n\t\t\tmargin: auto;\r\n\r\n\t\t\t.login {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.loginBtn {\r\n\t\t\t\t\twidth: 260rpx;\r\n\t\t\t\t\theight: 80rpx;\r\n\t\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t\t\tcolor: #FFFBF2;\r\n\t\t\t\t\tfont-size: 38rpx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tborder-radius: 100rpx;\r\n\t\t\t\t\tmargin: auto;\r\n\t\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.userHeader {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tcolor: #4d0000;\r\n\r\n\t\t\t\t.headerLeft {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 120rpx;\r\n\t\t\t\t\t\theight: 120rpx;\r\n\t\t\t\t\t\tborder-radius: 100%;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.name {\r\n\t\t\t\t\t\tpadding-left: 20rpx;\r\n\r\n\t\t\t\t\t\tview:first-child {\r\n\t\t\t\t\t\t\tfont-size: 50rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tview:last-child {\r\n\t\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.headerRight {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tpadding: 10rpx 20rpx;\r\n\t\t\t\t\tcolor: #FFFBF2;\r\n\t\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.set {\r\n\t\t\twidth: 95%;\r\n\t\t\tmargin: auto;\r\n\r\n\t\t\t.item {\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\tborder-bottom: 2rpx solid #dddad2;\r\n\t\t\t\tline-height: 80rpx;\r\n\t\t\t\tpadding: 16rpx 0;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t.itemLeft {\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 50rpx;\r\n\t\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\t\tvertical-align: middle;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.itemRight {\r\n\t\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t\t&::after {\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\tcontent: \"\\203A\";\r\n\t\t\t\t\t\tfont-size: 58rpx;\r\n\t\t\t\t\t\tright: 0%;\r\n\t\t\t\t\t\ttop: 0%;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/01前端学习/01fzhx/mazu-2/mazu-2/mazu-前端小程序/pages/mine/mine.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","signInAPI"],"mappings":";;;;;;;;;EAsEE,OAAA;AACC,WAAA;AAAA;QAEE,WAAA;AAAA;QAEA,UAAA;AAAA,QACA,YAAA;AAAA,QACA,QAAA;AAAA;;;;;;UAMC,KAAA;AAAA;QAED;AAAA;;;UAIC,KAAA;AAAA;;;;;;;QAQD;AAAA;;UAGC,KAAA;AAAA,UACA,KAAA;AAAA;QAED;AAAA;;;UAIC,KAAA;AAAA;QAED;AAAA;;;UAIC,KAAA;AAAA;QAED;AAAA;;;UAIC,KAAA;AAAA,QACD;AAAA;;;MAID,KAAA;AAAA,MACA,KAAA;AAAA,MACA,aAAA;AAAA,MACA,WAAA;AAAA;;;;;IAMD;AAAA,IACA;AAAA,IACA;AAAA;EAED,SAAA;;;;AAIE,WAAA,MAAA,CAAA,IAAA;AAAA;;;EAIF,SAAA;AAAA,IACC,UAAA;;AAEE,aAAA,WAAA,IAAA;AAAA;;IAGF,QAAA;AACCA,oBAAAA,MAAA,YAAA;AAAA;;AAGA,iBAAA,MAAA;AACCA,sBAAAA,MAAA,aAAA,GACCA,cAAAA,MAAA,YAAA,GACA,KAAA,MAAA,wBAEAA,cAAAA,MAAA,UAAA;AAAA,UACC,OAAA;AAAA,UACA,MAAA;AAAA;MAEH,GAAA,GAAA;AAAA;;AAGAA,oBAAAA,MAAA,YAAA;AAAA;;;AAIC,YAAA,IAAA,UAAA,KAAA;AACCA,wBAAA,MAAA,YAAA;;AAEA,eAAA,MAAA;AACA,eAAA,QAAA;AACAA,wBAAAA,MAAA,UAAA;AAAA,YACC,OAAA;AAAA,YACA,MAAA;AAAA;;AAGD,eAAA,MAAA,OACC,KAAA,QAAA,OACAA,cAAAA,MAAA,UAAA;AAAA;;YAGC,MAAA;AAAA;QAEH;AAAA;;IAGF,SAAA;AACCC,gBAAA,UAAA,KAAA,SAAA,MAAA,EAAA,KAAA,CAAA,QAAA;AACC,YAAA,IAAA,UAAA,MAAA;;AAECD,wBAAAA,MAAA,UAAA;AAAA;YAEC,SAAA;AAAA,YACA,YAAA;AAAA;;;AAIDA,wBAAAA,MAAA,UAAA;AAAA;YAEC,SAAA,IAAA;AAAA,YACA,YAAA;AAAA;;QAGF;AAAA;;IAGF,UAAA;AACCA,oBAAAA,MAAA,WAAA;AAAA;;;;AAKAA,oBAAAA,MAAA,YAAA;AAAA;;AAGA,iBAAA,MAAA;AACCA,sBAAAA,MAAA,aAAA,GACC,KAAA,WAAA,CAAA,+CAEAA,cAAAA,MAAA,YAAA,GACAA,cAAAA,MAAA,UAAA;AAAA,UACC,OAAA;AAAA,UACA,MAAA;AAAA;MAEH,GAAA,GAAA;AAAA;IAED,QAAA;AACCA,oBAAAA,MAAA,WAAA;AAAA,QACC,KAAA;AAAA;;IAGF,OAAA,IAAA,KAAA;AACCA,oBAAAA,MAAA,WAAA;AAAA,QACC;AAAA;;;EAIH,aAAA,GAAA;AACC,QAAA,EAAA,aAAA,IAAA;;IAEA;AACA,QAAA,EAAA,YAAA,IAAA;AACC,WAAA,UAAA,aAAA;AAAA,IACD;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvPH,GAAG,WAAW,eAAe;"}