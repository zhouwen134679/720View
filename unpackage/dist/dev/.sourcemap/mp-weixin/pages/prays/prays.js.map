{"version":3,"file":"prays.js","sources":["pages/prays/prays.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJheXMvcHJheXMudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"container\">\r\n\t\t\t<image class=\"backImage\" src=\"http://t73sifiwt.hn-bkt.clouddn.com/prays/mazuback.jpg\" mode=\"\">\r\n\t\t\t</image>\r\n\t\t\t<view class=\"zhangYiNa\">\r\n\t\t\t\t<image class=\"qian\" src=\"http://t73sifiwt.hn-bkt.clouddn.com/prays/qian.png\" mode=\"\"\r\n\t\t\t\t\t:class=\"{ 'shake': isShaking }\">\r\n\t\t\t\t</image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"share\">\r\n\t\t\t\t摇一摇 求好签\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t<incense-fab></incense-fab>\r\n\t<tabBar></tabBar>\r\n\t\r\n\t<!-- 首次进入提示弹窗 -->\r\n\t<uni-popup ref=\"firstVisitPopup\" type=\"center\" :isMaskClick=\"false\">\r\n\t\t<view class=\"first-visit-popup\">\r\n\t\t\t<view class=\"popup-header\">\r\n\t\t\t\t<text class=\"popup-title\">温馨提示</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<text class=\"popup-text\">本功能仅供娱乐体验，所有内容纯属虚构，请勿当真。</text>\r\n\t\t\t\t<text class=\"popup-text\">愿您平安喜乐，万事顺遂！</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"popup-footer\">\r\n\t\t\t\t<view class=\"popup-btn\" @click=\"closeFirstVisitPopup\">我知道了</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</uni-popup>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tonMounted,\r\n\t\tonUnmounted\r\n\t} from 'vue';\r\n\timport tabBar from \"/components/tabbar/tabbar.vue\";\r\n\timport IncenseFab from '/components/incense-fab/incense-fab.vue';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitleInfo: {\r\n\t\t\t\t\ttitleShow: true,\r\n\t\t\t\t\ttitle: \"祈福\",\r\n\t\t\t\t\timageUrl: \"http://t73sifiwt.hn-bkt.clouddn.com/pageBack/3.webp\",\r\n\t\t\t\t\theightShow: false\r\n\t\t\t\t},\r\n\t\t\t\tisShaking: false,\r\n\t\t\t\tisProcessing: false // 新增状态变量\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\ttabBar,\r\n\t\t\tIncenseFab\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// 检查是否首次进入\r\n\t\t\tthis.checkFirstVisit();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.startShakeListener();\r\n\t\t\tconsole.log('我被触发辣1');\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tthis.stopShakeListener();\r\n\t\t\tconsole.log('我被触发辣2');\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * 检查是否首次进入\r\n\t\t\t */\r\n\t\t\tcheckFirstVisit() {\r\n\t\t\t\tconst hasVisited = uni.getStorageSync('prays_first_visit');\r\n\t\t\t\tif (!hasVisited) {\r\n\t\t\t\t\t// 首次进入，显示弹窗\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$refs.firstVisitPopup.open();\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 关闭首次进入弹窗\r\n\t\t\t */\r\n\t\t\tcloseFirstVisitPopup() {\r\n\t\t\t\t// 标记已访问\r\n\t\t\t\tuni.setStorageSync('prays_first_visit', true);\r\n\t\t\t\tthis.$refs.firstVisitPopup.close();\r\n\t\t\t},\r\n\t\t\tstartShakeListener() {\r\n\t\t\t\tthis.handleShake = this.handleShake.bind(this);\r\n\t\t\t\tthis.gyroscopeChangeHandler = uni.onGyroscopeChange(this.handleShake);\r\n\t\t\t\tuni.startGyroscope({\r\n\t\t\t\t\tinterval: \"normal\"\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tstopShakeListener() {\r\n\t\t\t\tif (this.gyroscopeChangeHandler) {\r\n\t\t\t\t\tthis.gyroscopeChangeHandler();\r\n\t\t\t\t\tthis.gyroscopeChangeHandler = null;\r\n\t\t\t\t}\r\n\t\t\t\tuni.stopGyroscope();\r\n\t\t\t},\r\n\t\t\thandleShake(res) {\r\n\t\t\t\tif (this.isProcessing) return; // 如果正在处理则返回\r\n\r\n\t\t\t\tif (Math.abs(res.x) > 20 || Math.abs(res.y) > 4 || Math.abs(res.z) > 3) {\r\n\t\t\t\t\tthis.isProcessing = true; // 开始处理\r\n\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: \"求签中\",\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.randomNumber = Math.floor(Math.random() * 60) + 1; // 生成 1 到 60 之间的随机数\r\n\t\t\t\t\tthis.isShaking = true;\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.isShaking = false;\r\n\t\t\t\t\t}, 2000);\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: `/secondPages/praysDetail/praysDetail?randomPrays=${this.randomNumber}`\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.isProcessing = false; // 结束处理\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n\r\n<style lang=\"less\">\r\n\t.container {\r\n\t\tposition: relative;\r\n\t\theight: calc(100vh - 250rpx);\r\n\t\twidth: 100%;\r\n\t\tbackground-color: rgb(255, 251, 241);\r\n\t\tborder-radius: 40rpx 40rpx 0 0;\r\n\r\n\t\t.backImage {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: calc(100vh - 120rpx);\r\n\t\t\t// position: absolute;\r\n\t\t\tfloat: left;\r\n\t\t\ttop: 0%;\r\n\t\t\tleft: 0%;\r\n\t\t\tz-index: 1;\r\n\t\t}\r\n\r\n\t\t.zhangYiNa {\r\n\t\t\tposition: absolute;\r\n\t\t\theight: 100vh;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t.qian {\r\n\t\t\theight: 700rpx;\r\n\t\t\twidth: 570rpx;\r\n\t\t\tz-index: 99;\r\n\t\t}\r\n\t}\r\n\r\n\t.qian.shake {\r\n\t\tanimation: shake 0.5s infinite;\r\n\t}\r\n\r\n\t.share {\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, 0%);\r\n\t\tbottom: 5%;\r\n\t\tz-index: 99;\r\n\t\tfont-size: 52rpx;\r\n\t\tfont-family: '阿里妈妈数黑体 Bold' !important;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t@keyframes shake {\r\n\t\t0% {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\r\n\t\t25% {\r\n\t\t\ttransform: rotate(-10deg);\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: rotate(10deg);\r\n\t\t}\r\n\r\n\t\t75% {\r\n\t\t\ttransform: rotate(-10deg);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t}\r\n\r\n\t// 首次进入弹窗样式\r\n\t.first-visit-popup {\r\n\t\twidth: 600rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 24rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 10rpx 40rpx rgba(0, 0, 0, 0.15);\r\n\r\n\t\t.popup-header {\r\n\t\t\theight: 100rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tbackground: linear-gradient(135deg, #d4a574 0%, #c8965e 100%);\r\n\t\t\tborder-bottom: 1rpx solid rgba(255, 255, 255, 0.2);\r\n\r\n\t\t\t.popup-title {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.popup-content {\r\n\t\t\tpadding: 40rpx 30rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tmin-height: 200rpx;\r\n\r\n\t\t\t.popup-text {\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tline-height: 1.8;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t\t&:last-child {\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t\tcolor: #d4a574;\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.popup-footer {\r\n\t\t\tborder-top: 1rpx solid #eee;\r\n\r\n\t\t\t.popup-btn {\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground: linear-gradient(135deg, #d4a574 0%, #c8965e 100%);\r\n\t\t\t\ttransition: all 0.2s;\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\topacity: 0.8;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/18706/Desktop/MZ/mazu-前端小程序/pages/prays/prays.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAwCC,eAAe,MAAW;AAC1B,MAAK,aAAc,MAAW;AAE9B,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,WAAW;AAAA,QACV,WAAW;AAAA,QACX,OAAO;AAAA,QACP,UAAU;AAAA,QACV,YAAY;AAAA,MACZ;AAAA,MACD,WAAW;AAAA,MACX,cAAc;AAAA;AAAA;EAEf;AAAA,EACD,YAAY;AAAA,IACX;AAAA,IACA;AAAA,EACA;AAAA,EACD,SAAS;AAER,SAAK,gBAAe;AAAA,EACpB;AAAA,EACD,SAAS;AACR,SAAK,mBAAkB;AACvBA,kBAAAA,MAAY,MAAA,OAAA,+BAAA,QAAQ;AAAA,EACpB;AAAA,EACD,SAAS;AACR,SAAK,kBAAiB;AACtBA,kBAAAA,MAAY,MAAA,OAAA,+BAAA,QAAQ;AAAA,EACpB;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAIR,kBAAkB;AACjB,YAAM,aAAaA,cAAAA,MAAI,eAAe,mBAAmB;AACzD,UAAI,CAAC,YAAY;AAEhB,mBAAW,MAAM;AAChB,eAAK,MAAM,gBAAgB;QAC3B,GAAE,GAAG;AAAA,MACP;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAID,uBAAuB;AAEtBA,oBAAAA,MAAI,eAAe,qBAAqB,IAAI;AAC5C,WAAK,MAAM,gBAAgB;IAC3B;AAAA,IACD,qBAAqB;AACpB,WAAK,cAAc,KAAK,YAAY,KAAK,IAAI;AAC7C,WAAK,yBAAyBA,cAAG,MAAC,kBAAkB,KAAK,WAAW;AACpEA,oBAAAA,MAAI,eAAe;AAAA,QAClB,UAAU;AAAA,MACX,CAAC;AAAA,IACD;AAAA,IACD,oBAAoB;AACnB,UAAI,KAAK,wBAAwB;AAChC,aAAK,uBAAsB;AAC3B,aAAK,yBAAyB;AAAA,MAC/B;AACAA,oBAAG,MAAC,cAAa;AAAA,IACjB;AAAA,IACD,YAAY,KAAK;AAChB,UAAI,KAAK;AAAc;AAEvB,UAAI,KAAK,IAAI,IAAI,CAAC,IAAI,MAAM,KAAK,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,IAAI,IAAI,CAAC,IAAI,GAAG;AACvE,aAAK,eAAe;AAEpBA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD,aAAK,eAAe,KAAK,MAAM,KAAK,OAAS,IAAE,EAAE,IAAI;AACrD,aAAK,YAAY;AAEjB,mBAAW,MAAM;AAChB,eAAK,YAAY;AAAA,QACjB,GAAE,GAAI;AAEP,mBAAW,MAAM;AAChBA,wBAAG,MAAC,YAAW;AACfA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK,oDAAoD,KAAK,YAAY;AAAA,UAC3E,CAAC;AACD,eAAK,eAAe;AAAA,QACpB,GAAE,GAAI;AAAA,MACR;AAAA,IACA;AAAA,EACF;;;;;;;;;;;;;;;;;;;;;;;;;ACpIF,GAAG,WAAW,eAAe;"}