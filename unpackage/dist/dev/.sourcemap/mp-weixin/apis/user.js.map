{"version":3,"file":"user.js","sources":["apis/user.js"],"sourcesContent":["import request from \"../utils/request\";\r\n\r\n// 获取微信openid\r\nexport const getOpenIdAPI = (code) => {\r\n\treturn request(({\r\n\t\turl: '/user/wxGetOpenId',\r\n\t\tmethod: 'POST',\r\n\t\tdata: {\r\n\t\t\tcode\r\n\t\t}\r\n\t}))\r\n}\r\n\r\n// 根据id判断 注册or登录\r\nexport const wxLoginAPI = ({\r\n\topenid,\r\n\tnickname,\r\n\tavatarurl,\r\n\tgender\r\n}) => {\r\n\treturn request({\r\n\t\turl: \"/user/wxLogin\",\r\n\t\tmethod: 'POST',\r\n\t\tdata: {\r\n\t\t\topenid,\r\n\t\t\tnickname,\r\n\t\t\tavatarurl,\r\n\t\t\tgender\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 修改昵称\r\nexport const editNicknameAPI = ({\r\n\tname,\r\n\tid\r\n}) => {\r\n\treturn request({\r\n\t\turl: \"/user/editNickname\",\r\n\t\tmethod: 'POST',\r\n\t\tdata: {\r\n\t\t\tname,\r\n\t\t\tid\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 修改头像\r\nexport const editUserHeaders = (data) => {\r\n\treturn uni.uploadFile({\r\n\t\turl: '/user/editUserHeaders',\r\n\t\tfilePath: data.filePath,\r\n\t\tname: 'img',\r\n\t\tformData: {\r\n\t\t\tid: data.id\r\n\t\t},\r\n\t\theader: {\r\n\t\t\t'content-type': 'multipart/form-data',\r\n\t\t\t'Authorization': uni.getStorageSync('token')\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 统计用户访问量\r\nexport const userVisitCountAPI = (userId) => {\r\n\treturn request({\r\n\t\turl: \"/user/userVisitCount\",\r\n\t\tmethod: \"POST\",\r\n\t\tdata: {\r\n\t\t\tuserId\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 查询用户余额\r\nexport const checkBalanceZeroAPI = (openid) => {\r\n\treturn request({\r\n\t\turl: \"/user/checkBalanceZero\",\r\n\t\tmethod: \"POST\",\r\n\t\tdata: {\r\n\t\t\topenid\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 增加余额\r\nexport const addBalanceAPI = (openid) => {\r\n\treturn request({\r\n\t\turl: \"/user/addBalance\",\r\n\t\tmethod: \"POST\",\r\n\t\tdata: {\r\n\t\t\topenid\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 签到\r\nexport const signInAPI = (openid) => {\r\n\treturn request({\r\n\t\turl: \"/user/signIn\",\r\n\t\tmethod: \"POST\",\r\n\t\tdata: {\r\n\t\t\topenid\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 获取该用户签到天数\r\nexport const getContinuousSignInDaysAPI = (openid) => {\r\n\treturn request({\r\n\t\turl: \"/user/getContinuousSignInDays\",\r\n\t\tmethod: \"POST\",\r\n\t\tdata: {\r\n\t\t\topenid\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 模拟微信支付供奉香火，成功后累积香火值\r\nexport const incensePayAPI = ({\r\n\tuser_id,\r\n\tamount,\r\n\tpay_method = 'wechat'\r\n}) => {\r\n\treturn request({\r\n\t\turl: \"/user/incensePay\",\r\n\t\tmethod: \"POST\",\r\n\t\tdata: {\r\n\t\t\tuser_id,\r\n\t\t\tamount,\r\n\t\t\tpay_method\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// 统计访问量（不仅限于用户）\r\nexport const visitCountAPI = () => {\r\n\treturn request({\r\n\t\turl: \"/user/visitCount\",\r\n\t\tmethod: \"POST\"\r\n\t})\r\n}"],"names":["request"],"mappings":";;;AAGY,MAAC,eAAe,CAAC,SAAS;AACrC,SAAOA,sBAAS;AAAA,IACf,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACL;AAAA,IACA;AAAA,EACH,CAAI;AACJ;AAGY,MAAC,aAAa,CAAC;AAAA,EAC1B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD,MAAM;AACL,SAAOA,sBAAQ;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACA;AAAA,EACH,CAAE;AACF;AAGY,MAAC,kBAAkB,CAAC;AAAA,EAC/B;AAAA,EACA;AACD,MAAM;AACL,SAAOA,sBAAQ;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACL;AAAA,MACA;AAAA,IACA;AAAA,EACH,CAAE;AACF;AAmBY,MAAC,oBAAoB,CAAC,WAAW;AAC5C,SAAOA,sBAAQ;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACL;AAAA,IACA;AAAA,EACH,CAAE;AACF;AAGY,MAAC,sBAAsB,CAAC,WAAW;AAC9C,SAAOA,sBAAQ;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACL;AAAA,IACA;AAAA,EACH,CAAE;AACF;AAGY,MAAC,gBAAgB,CAAC,WAAW;AACxC,SAAOA,sBAAQ;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACL;AAAA,IACA;AAAA,EACH,CAAE;AACF;AAGY,MAAC,YAAY,CAAC,WAAW;AACpC,SAAOA,sBAAQ;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACL;AAAA,IACA;AAAA,EACH,CAAE;AACF;AAGY,MAAC,6BAA6B,CAAC,WAAW;AACrD,SAAOA,sBAAQ;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACL;AAAA,IACA;AAAA,EACH,CAAE;AACF;AAoBY,MAAC,gBAAgB,MAAM;AAClC,SAAOA,sBAAQ;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,EACV,CAAE;AACF;;;;;;;;;;"}