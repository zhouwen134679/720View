{"version":3,"file":"mask.js","sources":["components/mask/mask.vue","E:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovMDHliY3nq6_lrabkuaAvMDFmemh4L21henUtMi9tYXp1LTIvbWF6dS3liY3nq6_lsI_nqIvluo8vY29tcG9uZW50cy9tYXNrL21hc2sudnVl"],"sourcesContent":["<template>\r\n\t<transition name=\"mask-transition\">\r\n\t\t<view class=\"content\" v-if=\"isShow\" @click.stop.prevent=\"onMaskClick\">\r\n\t\t\t<view class=\"container\">\r\n\t\t\t\t<image src=\"http://t73sifiwt.hn-bkt.clouddn.com/component/mask/mask.png\" mode=\"aspectFill\" />\r\n\t\t\t\t<view class=\"btn\" @click.stop.prevent=\"closeMask\">跳过({{ time }}s)</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</transition>\r\n</template>\r\n\r\n<script>\r\nimport { userVisitCountAPI, visitCountAPI } from '/apis/user.js';\r\nimport { useUserInfoStore } from '/store/userInfo.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisShow: false,\r\n\t\t\ttime: 5,\r\n\t\t\ttimer: null,\r\n\t\t\tclickLocked: false // 防止重复触发\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.isShow = true;\r\n\t\tthis.autoClose();\r\n\r\n\t\tconst user = useUserInfoStore().$state.userInfo;\r\n\t\tif (user?.id) userVisitCountAPI(user.id);\r\n\t\tvisitCountAPI();\r\n\t},\r\n\tmethods: {\r\n\t\t// 点击遮罩空白区域时不触发任何事件\r\n\t\tonMaskClick(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\t// 点击“跳过”\r\n\t\tcloseMask(e) {\r\n\t\t  if (e && e.stopPropagation) e.stopPropagation();\r\n\t\t  this.isShow = false;\r\n\r\n\t\t  // 延迟发事件，让动画执行完\r\n\t\t  setTimeout(() => {\r\n\t\t    this.$emit('mask-closed', true);\r\n\t\t  }, 800);\r\n\t\t},\r\n\r\n\t\t// 自动倒计时关闭\r\n\t\tautoClose() {\r\n\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\tthis.time--;\r\n\t\t\t\tif (this.time <= 0) {\r\n\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\tthis.closeMask();\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tclearInterval(this.timer);\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.content {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tz-index: 9999;\r\n\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\r\n\t.container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\r\n\t\timage {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\r\n\t\t.btn {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 13%;\r\n\t\t\tright: 5%;\r\n\t\t\tz-index: 10000;\r\n\t\t\tpadding: 20rpx 40rpx;\r\n\t\t\tborder-radius: 40rpx;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* 动画 */\r\n.mask-transition-enter-active,\r\n.mask-transition-leave-active {\r\n\ttransition: all 0.5s ease;\r\n}\r\n\r\n.mask-transition-enter-from {\r\n\topacity: 0;\r\n\ttransform: translateY(-100%);\r\n}\r\n\r\n.mask-transition-enter-to,\r\n.mask-transition-leave-from {\r\n\topacity: 1;\r\n\ttransform: translateY(0);\r\n}\r\n\r\n.mask-transition-leave-to {\r\n\topacity: 0;\r\n\ttransform: translateY(-100%);\r\n}\r\n</style>\r\n","import Component from 'D:/01前端学习/01fzhx/mazu-2/mazu-2/mazu-前端小程序/components/mask/mask.vue'\nwx.createComponent(Component)"],"names":["useUserInfoStore","userVisitCountAPI","visitCountAPI"],"mappings":";;;;AAeA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,OAAO;AAAA,MACP,aAAa;AAAA;AAAA;EAEd;AAAA,EACD,UAAU;AACT,SAAK,SAAS;AACd,SAAK,UAAS;AAEd,UAAM,OAAOA,eAAAA,mBAAmB,OAAO;AACvC,QAAI,6BAAM;AAAIC,gBAAiB,kBAAC,KAAK,EAAE;AACvCC,cAAAA;EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,YAAY,GAAG;AACd,QAAE,eAAc;AAChB,QAAE,gBAAe;AACjB,aAAO;AAAA,IACP;AAAA;AAAA,IAGD,UAAU,GAAG;AACX,UAAI,KAAK,EAAE;AAAiB,UAAE,gBAAe;AAC7C,WAAK,SAAS;AAGd,iBAAW,MAAM;AACf,aAAK,MAAM,eAAe,IAAI;AAAA,MAC/B,GAAE,GAAG;AAAA,IACP;AAAA;AAAA,IAGD,YAAY;AACX,WAAK,QAAQ,YAAY,MAAM;AAC9B,aAAK;AACL,YAAI,KAAK,QAAQ,GAAG;AACnB,wBAAc,KAAK,KAAK;AACxB,eAAK,UAAS;AAAA,QACf;AAAA,MACA,GAAE,GAAI;AAAA,IACR;AAAA,EACA;AAAA,EACD,gBAAgB;AACf,kBAAc,KAAK,KAAK;AAAA,EACzB;AACD;;;;;;;;;;;;;;;;;;;AChEA,GAAG,gBAAgB,SAAS;"}