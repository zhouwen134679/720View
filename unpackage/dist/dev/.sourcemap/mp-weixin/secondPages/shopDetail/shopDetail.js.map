{"version":3,"file":"shopDetail.js","sources":["secondPages/shopDetail/shopDetail.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c2Vjb25kUGFnZXNcc2hvcERldGFpbFxzaG9wRGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<pageBack :titleInfo=\"titleInfo\"></pageBack>\r\n\t<view class=\"content\">\r\n\t\t<swiper v-for=\"(item,index) in contentInfo\" class=\"shopSwiper\">\r\n\t\t\t<swiper-item v-for=\"(list,index) in item.imageUrl.length\">\r\n\t\t\t\t<image :src=\"item.imageUrl[index]\" mode=\"aspectFill\"></image>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t<view class=\"\">\r\n\t\t</view>\r\n\t\t<view class=\"contentInfo\">\r\n\t\t\t<view class=\"price\">\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<text>{{ contentInfo[0]?.grid === '公益' ? '捐款金额' : '香火值' }}</text><text style=\"margin: 0 10rpx;\">{{contentInfo[0]?.price}}</text><text>{{ contentInfo[0]?.grid === '公益' ? '元' : '兑换' }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"shopName\">\r\n\t\t\t\t<text v-if=\"contentInfo[0]?.grid !== '公益'\">旗舰店</text>\r\n\t\t\t\t{{contentInfo[0]?.shopname}}\r\n\t\t\t</view>\r\n\t\t\t<view class=\"introduce\">\r\n\t\t\t\t<template v-if=\"contentInfo[0]?.grid === '公益'\">\r\n\t\t\t\t\t<text>爱心捐赠</text>\r\n\t\t\t\t\t<text>·</text>\r\n\t\t\t\t\t<text>公益项目</text>\r\n\t\t\t\t\t<text>·</text>\r\n\t\t\t\t\t<text>透明公开</text>\r\n\t\t\t\t\t<text>·</text>\r\n\t\t\t\t\t<text>感谢支持</text>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<text>退货包运费</text>\r\n\t\t\t\t\t<text>·</text>\r\n\t\t\t\t\t<text>全场包邮</text>\r\n\t\t\t\t\t<text>·</text>\r\n\t\t\t\t\t<text>7天无理由退货</text>\r\n\t\t\t\t\t<text>·</text>\r\n\t\t\t\t\t<text>极速退款</text>\r\n\t\t\t\t</template>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"separate\"></view>\r\n\t\t<view class=\"shopDetail\">\r\n\t\t\t<view class=\"detail\">\r\n\t\t\t\t<text class=\"detailTitle\">{{ contentInfo[0]?.grid === '公益' ? '公益背景' : '产品详情' }}</text>\r\n\t\t\t\t<view class=\"detailInfo\">{{ contentInfo[0]?.grid === '公益' ? '暂无公益项目介绍...' : '暂无介绍...' }}</view>\r\n\t\t\t\t<view v-for=\"item in contentInfo[0].imageUrl\">\r\n\t\t\t\t\t<image :src=\"item\" mode=\"aspectFill\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t<view class=\"tab\" :class=\"{ isIos: isIos }\">\r\n\t\t<view class=\"view\">\r\n\t\t\t<view class=\"collection\">\r\n\t\t\t\t<image :src=\"imageJudge ? '../../static/shoucang_active.svg' : '../../static/shoucang.svg'\"\r\n\t\t\t\t\t@click=\"collect\" mode=\"\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"buy\" @click=\"toBuy\">\r\n\t\t\t\t{{ contentInfo[0]?.grid === '公益' ? '捐赠款项' : '立即兑换' }}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport pageBack from \"/components/title/title.vue\";\r\n\timport {\r\n\t\tuseUserInfoStore\r\n\t} from \"@/store/userInfo.js\"\r\n\timport {\r\n\t\tgetShopDetailAPI,\r\n\t\tcollectGoodsAPI,\r\n\t\tjudgeCollectAPI\r\n\t} from \"/apis/shop.js\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitleInfo: {\r\n\t\t\t\t\ttitleShow: true,\r\n\t\t\t\t\ttitle: \"商品详情\",\r\n\t\t\t\t\timageUrl: \"http://t73sifiwt.hn-bkt.clouddn.com/pageBack/1.webp\",\r\n\t\t\t\t\theightShow: false,\r\n\t\t\t\t\tbackShow: true\r\n\t\t\t\t},\r\n\t\t\t\tcontentInfo: {},\r\n\t\t\t\tisIos: false,\r\n\t\t\t\tshopId: null,\r\n\t\t\t\t// 收藏图标判断\r\n\t\t\t\timageJudge: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tpageBack\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 判断是否ios\r\n\t\t\tif (uni.getSystemInfoSync().platform == 'ios' || uni.getSystemInfoSync().platform == 'devtools') {\r\n\t\t\t\tthis.isIos = true\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\t// 获取商品详情\r\n\t\t\t\tgetShopDetailAPI(option.shopId).then((res) => {\r\n\t\t\t\t\tthis.contentInfo = res.message.map((item) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\timageUrl: JSON.parse(item.imageUrl)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 设置动态标题\r\n\t\t\t\t\tthis.titleInfo.title = this.contentInfo[0]?.grid === '公益' ? '公益项目' : '商品详情'\r\n\t\t\t\t})\r\n\t\t\tthis.shopId = option.shopId\r\n\r\n\t\t\t// 获取商品是否收藏\r\n\t\t\tjudgeCollectAPI({\r\n\t\t\t\tuser_id: useUserInfoStore().$state.userInfo.id,\r\n\t\t\t\tgoods_id: option.shopId\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tthis.imageJudge = res.judge\r\n\t\t\t})\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tif (e.scrollTop >= 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = true\r\n\t\t\t}\r\n\t\t\tif (e.scrollTop < 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttoBuy() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/secondPages/commitOrder/commitOrder?shopId=${this.shopId}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 收藏\r\n\t\t\tcollect() {\r\n\t\t\t\tif (!useUserInfoStore().$state.userInfo.id) {\r\n\t\t\t\t\t// 用户未登录,跳转到登录页面  \r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.imageJudge) {\r\n\t\t\t\t\t// 取消收藏的逻辑  \r\n\t\t\t\t\tthis.collectGoods(useUserInfoStore().$state.userInfo.id, this.contentInfo[0].id, false)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 收藏的逻辑  \r\n\t\t\t\t\tthis.collectGoods(useUserInfoStore().$state.userInfo.id, this.contentInfo[0].id, true)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//收藏api\r\n\t\t\tcollectGoods(user_id, goods_id, judge) {\r\n\t\t\t\tcollectGoodsAPI({\r\n\t\t\t\t\tuser_id,\r\n\t\t\t\t\tgoods_id,\r\n\t\t\t\t\tjudge\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\t\tthis.imageJudge = !this.imageJudge;\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.content {\r\n\t\tpadding-bottom: 200rpx;\r\n\t\tposition: relative;\r\n\t\ttop: 200rpx;\r\n\t\twidth: 100%;\r\n\t\tmin-height: 300rpx;\r\n\t\tbackground-color: rgb(255, 251, 241);\r\n\t\tborder-radius: 40rpx 40rpx 0 0;\r\n\t\toverflow: hidden;\r\n\t\t// padding: 40rpx 0;\r\n\t\tfont-family: \"阿里妈妈方圆体 VF Regular\" !important;\r\n\r\n\t\t.shopSwiper {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 600rpx;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.contentInfo {\r\n\t\t\tpadding: 20rpx 0;\r\n\t\t\twidth: 95%;\r\n\t\t\tmargin: auto;\r\n\r\n\t\t\t.price {\r\n\t\t\t\tcolor: rgb(182, 0, 0);\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tfont-weight: bold;\r\n\r\n\t\t\t\ttext {\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttext:nth-child(2) {\r\n\t\t\t\t\tfont-size: 60rpx;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttext:last-child {\r\n\t\t\t\t\tcolor: gray;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.shopName {\r\n\t\t\t\tpadding: 10rpx 0;\r\n\t\t\t\tfont-size: 38rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tline-height: 48rpx;\r\n\r\n\t\t\t\ttext {\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tbackground-color: bisque;\r\n\t\t\t\t\tpadding: 10rpx;\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\tcolor: #000;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.introduce {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: gray;\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tcontent: \"\\203A\";\r\n\t\t\t\t\tfont-size: 46rpx;\r\n\t\t\t\t\tright: 0%;\r\n\t\t\t\t\ttop: 2%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.separate {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 20rpx;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.04);\r\n\t\t}\r\n\r\n\t\t.shopDetail {\r\n\t\t\tpadding: 20rpx 0;\r\n\t\t\twidth: 95%;\r\n\t\t\tmargin: auto;\r\n\r\n\t\t\t.detailTitle {\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\r\n\t\t\t.detailInfo {\r\n\t\t\t\tpadding: 40rpx 0;\r\n\t\t\t}\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 700rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.tab::before {\r\n\t\tcontent: \"\";\r\n\t\theight: 2rpx;\r\n\t\twidth: 100%;\r\n\t\tposition: absolute;\r\n\t\tbackground-color: #00000014;\r\n\t}\r\n\r\n\t.tab {\r\n\t\tbackground-color: rgb(255, 251, 242);\r\n\t\tz-index: 999;\r\n\t\tposition: fixed;\r\n\t\theight: 140rpx;\r\n\t\twidth: 100%;\r\n\t\tbottom: 0%;\r\n\t\tleft: 0%;\r\n\r\n\t\t.view {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\theight: 140rpx;\r\n\t\t\twidth: 90%;\r\n\t\t\tmargin: auto;\r\n\r\n\t\t\t.collection {\r\n\t\t\t\twidth: 100rpx;\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tbackground-color: rgb(255, 247, 228);\r\n\t\t\t\tborder-radius: 10rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 70rpx;\r\n\t\t\t\t\theight: 70rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.buy {\r\n\t\t\t\tpadding: 20rpx 40rpx;\r\n\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.isIos {\r\n\t\tpadding-bottom: 20rpx;\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/18706/Desktop/MZ/mazu-前端小程序/secondPages/shopDetail/shopDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getShopDetailAPI","judgeCollectAPI","useUserInfoStore","collectGoodsAPI"],"mappings":";;;;;;EA4EE,OAAA;AACC,WAAA;AAAA;QAEE,WAAA;AAAA;QAEA,UAAA;AAAA,QACA,YAAA;AAAA;;MAGD,aAAA,CAAA;AAAA;;;MAIA,YAAA;AAAA;;;IAID;AAAA;EAED,UAAA;AAEC,QAAAA,cAAA,MAAA,kBAAA,EAAA,YAAA,SAAAA,cAAAA,MAAA,kBAAA,EAAA,YAAA,YAAA;AACC,WAAA,QAAA;AAAA,IACD;AAAA;EAED,OAAA,QAAA;AAEEC,cAAAA,iBAAA,OAAA,MAAA,EAAA,KAAA,CAAA,QAAA;;AACC,WAAA,cAAA,IAAA,QAAA,IAAA,CAAA,SAAA;AACC,eAAA;AAAA,UACC,GAAA;AAAA,UACA,UAAA,KAAA,MAAA,KAAA,QAAA;AAAA,QACD;AAAA;AAGD,WAAA,UAAA,UAAA,UAAA,YAAA,CAAA,MAAA,mBAAA,UAAA,OAAA,SAAA;AAAA;;AAKFC,8BAAA;AAAA,MACC,SAAAC,eAAA,iBAAA,EAAA,OAAA,SAAA;AAAA,MACA,UAAA,OAAA;AAAA,IACD,CAAA,EAAA,KAAA,CAAA,QAAA;;;;EAID,aAAA,GAAA;AACC,QAAA,EAAA,aAAA,IAAA;;IAEA;AACA,QAAA,EAAA,YAAA,IAAA;AACC,WAAA,UAAA,aAAA;AAAA,IACD;AAAA;EAED,SAAA;AAAA,IACC,QAAA;AACCH,oBAAAA,MAAA,WAAA;AAAA,QACC,KAAA,+CAAA,KAAA,MAAA;AAAA;;;IAIF,UAAA;AACC,UAAA,CAAAG,eAAAA,iBAAA,EAAA,OAAA,SAAA,IAAA;AAECH,sBAAAA,MAAA,WAAA;AAAA;QAEA,CAAA;AACA;AAAA,MACD;AACA,UAAA,KAAA,YAAA;AAEC,aAAA,aAAAG,gCAAA,EAAA,OAAA,SAAA,IAAA,KAAA,YAAA,CAAA,EAAA,IAAA,KAAA;AAAA;AAGA,aAAA,aAAAA,gCAAA,EAAA,OAAA,SAAA,IAAA,KAAA,YAAA,CAAA,EAAA,IAAA,IAAA;AAAA,MACD;AAAA;;IAGD,aAAA,SAAA,UAAA,OAAA;AACCC,gCAAA;AAAA,QACC;AAAA,QACA;AAAA;MAED,CAAA,EAAA,KAAA,CAAA,QAAA;AACC,YAAA,IAAA,UAAA,KAAA;AACC,eAAA,aAAA,CAAA,KAAA;AACAJ,wBAAAA,MAAA,UAAA;AAAA,YACC,OAAA,IAAA;AAAA;QAEF;AAAA,MACD,CAAA;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzKD,GAAG,WAAW,eAAe;"}