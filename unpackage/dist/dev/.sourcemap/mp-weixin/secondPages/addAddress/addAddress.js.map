{"version":3,"file":"addAddress.js","sources":["secondPages/addAddress/addAddress.vue","E:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c2Vjb25kUGFnZXNcYWRkQWRkcmVzc1xhZGRBZGRyZXNzLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<pageBack :titleInfo=\"titleInfo\"></pageBack>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"info\">\r\n\t\t\t<view class=\"default\">\r\n\t\t\t\t<text>填写地址</text>\r\n\t\t\t\t<label class=\"radio\" @click=\"isDefault = !isDefault\">\r\n\t\t\t\t\t<view class=\"radio2\" :class=\"{'radio2_active' : isDefault}\">\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text>默认收货地址</text>\r\n\t\t\t\t</label>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form\">\r\n\t\t\t\t<view class=\"name flex\">\r\n\t\t\t\t\t<label>收货人</label>\r\n\t\t\t\t\t<input v-model=\"name\" type=\"text\" placeholder=\"请输入收货人姓名\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"phone flex\">\r\n\t\t\t\t\t<label>联系电话</label>\r\n\t\t\t\t\t<input v-model=\"phone\" type=\"text\" placeholder=\"手机号码\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"region flex\">\r\n\t\t\t\t\t<label>所在地区</label>\r\n\t\t\t\t\t<view class=\"region-picker\">\r\n\t\t\t\t\t\t<text @tap=\"open\">{{this.str}}</text>\r\n\t\t\t\t\t\t<cityPicker :column=\"column\" :default-value=\"defaultValue\" :mask-close-able=\"maskCloseAble\"\r\n\t\t\t\t\t\t\t@confirm=\"confirm\" @cancel=\"cancel\" :visible=\"visible\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"address flex\">\r\n\t\t\t\t\t<label>详细地址</label>\r\n\t\t\t\t\t<input style=\"width:75%;\" v-model=\"address\" type=\"text\" placeholder=\"小区、门牌号等\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"save\">\r\n\t\t\t<view class=\"saveButton\" @click=\"save\">\r\n\t\t\t\t保存地址\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport pageBack from \"/components/title/title.vue\";\r\n\timport cityPicker from '@/uni_modules/piaoyi-cityPicker/components/piaoyi-cityPicker/piaoyi-cityPicker'\r\n\timport {\r\n\t\taddAddressAPI,\r\n\t\tgetIdAddressAPI,\r\n\t\teditAddressAPI\r\n\t} from \"../../apis/shop.js\"\r\n\timport {\r\n\t\tuseUserInfoStore\r\n\t} from \"/store/userInfo.js\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitleInfo: {\r\n\t\t\t\t\ttitleShow: true,\r\n\t\t\t\t\ttitle: \"新增地址\",\r\n\t\t\t\t\timageUrl: \"http://t73sifiwt.hn-bkt.clouddn.com/pageBack/1.webp\",\r\n\t\t\t\t\theightShow: false,\r\n\t\t\t\t\tbackShow: true\r\n\t\t\t\t},\r\n\t\t\t\taddList: [],\r\n\t\t\t\tisDefault: false,\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tmaskCloseAble: true,\r\n\t\t\t\t// 地址字符串  \r\n\t\t\t\tstr: '请选择地址',\r\n\t\t\t\t// 省  \r\n\t\t\t\tprovinceName: null,\r\n\t\t\t\t// 市  \r\n\t\t\t\tcity: null,\r\n\t\t\t\t// 区  \r\n\t\t\t\tdistrict: null,\r\n\t\t\t\tdefaultValue: '',\r\n\t\t\t\tcolumn: 3,\r\n\t\t\t\tisDefault: false,\r\n\t\t\t\tname: null,\r\n\t\t\t\tphone: null,\r\n\t\t\t\taddress: null,\r\n\t\t\t\taddressId: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tpageBack,\r\n\t\t\tcityPicker\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tif (option.pageCode == 2 && option.addressId) {\r\n\t\t\t\tthis.titleInfo.title = \"修改地址\"\r\n\t\t\t\tthis.addressId = option.addressId\r\n\t\t\t\tgetIdAddressAPI(option.addressId).then((res) => {\r\n\t\t\t\t\tthis.name = res.message[0].name\r\n\t\t\t\t\tthis.address = res.message[0].remark\r\n\t\t\t\t\tthis.phone = res.message[0].mobile\r\n\t\t\t\t\tthis.isDefault = res.message[0].isDefault\r\n\t\t\t\t\t// 赋值省市区  \r\n\t\t\t\t\tthis.provinceName = res.message[0].province_id\r\n\t\t\t\t\tthis.city = res.message[0].city_id\r\n\t\t\t\t\tthis.district = res.message[0].district_id\r\n\t\t\t\t\tthis.str =\r\n\t\t\t\t\t\t`${res.message[0].province_id}-${res.message[0].city_id}-${res.message[0].district_id}`\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.getRegions()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\topen() {\r\n\t\t\t\tthis.visible = true\r\n\t\t\t},\r\n\t\t\tconfirm(val) {\r\n\t\t\t\tthis.str = `${val.provinceName}-${val.cityName}-${val.areaName}`\r\n\t\t\t\tthis.provinceName = val.provinceName\r\n\t\t\t\tthis.city = val.cityName\r\n\t\t\t\tthis.district = val.areaName\r\n\t\t\t\tthis.visible = false\r\n\t\t\t},\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.visible = false\r\n\t\t\t},\r\n\t\t\t// 提交  \r\n\t\t\tsave() {\r\n\t\t\t\t// 检查所有字段是否为空  \r\n\t\t\t\tif (!this.name || !this.phone || !this.address || !this.provinceName || !this.city || !this.district) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写完整的地址信息\",\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.addressId == null) {\r\n\t\t\t\t\taddAddressAPI({\r\n\t\t\t\t\t\tuser_id: useUserInfoStore().$state.userInfo.id,\r\n\t\t\t\t\t\tprovince: this.provinceName,\r\n\t\t\t\t\t\tcity: this.city,\r\n\t\t\t\t\t\tdistrict: this.district,\r\n\t\t\t\t\t\tremark: this.address,\r\n\t\t\t\t\t\tname: this.name,\r\n\t\t\t\t\t\tmobile: this.phone,\r\n\t\t\t\t\t\tisDefault: this.isDefault\r\n\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\tthis.message(res)\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\teditAddressAPI({\r\n\t\t\t\t\t\tid: this.addressId,\r\n\t\t\t\t\t\tuser_id: useUserInfoStore().$state.userInfo.id,\r\n\t\t\t\t\t\tprovince: this.provinceName,\r\n\t\t\t\t\t\tcity: this.city,\r\n\t\t\t\t\t\tdistrict: this.district,\r\n\t\t\t\t\t\tremark: this.address,\r\n\t\t\t\t\t\tname: this.name,\r\n\t\t\t\t\t\tmobile: this.phone,\r\n\t\t\t\t\t\tisDefault: this.isDefault\r\n\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\tthis.message(res)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmessage(res) {\r\n\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"保存成功\"\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tif (e.scrollTop >= 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = true\r\n\t\t\t}\r\n\t\t\tif (e.scrollTop < 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.content {\r\n\t\tpadding-bottom: 200rpx;\r\n\t\tposition: relative;\r\n\t\ttop: 200rpx;\r\n\t\twidth: 100%;\r\n\t\tmin-height: 300rpx;\r\n\t\tbackground-color: rgb(255, 251, 241);\r\n\t\tborder-radius: 40rpx 40rpx 0 0;\r\n\t\toverflow: hidden;\r\n\t\tpadding: 40rpx 0;\r\n\t\tfont-family: \"阿里妈妈方圆体 VF Regular\" !important;\r\n\r\n\t\t.info {\r\n\t\t\twidth: 90%;\r\n\t\t\tmargin: auto;\r\n\r\n\t\t\t.default {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: baseline;\r\n\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\ttext {\r\n\t\t\t\t\tfont-size: 38rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.radio {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\ttext {\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.radio2 {\r\n\t\t\t\t\t\twidth: 28rpx;\r\n\t\t\t\t\t\theight: 28rpx;\r\n\t\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\t\tborder: 2rpx solid #4d0000;\r\n\t\t\t\t\t\tborder-radius: 100%;\r\n\t\t\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.radio2_active {\r\n\t\t\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t\t\t\tborder: 2rpx solid #000;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.form {\r\n\t\t\t\tpadding-top: 40rpx;\r\n\r\n\t\t\t\t.region-picker {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tview {\r\n\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\tborder-bottom: 2rpx solid rgba(0, 0, 0, 0.05);\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\tlabel {\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\twidth: 160rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinput {\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.save {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 160rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.saveButton {\r\n\t\t\t\twidth: 400rpx;\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.flex {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/01前端学习/01fzhx/mazu-2/mazu-2/mazu-前端小程序/secondPages/addAddress/addAddress.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","addAddressAPI","useUserInfoStore","editAddressAPI"],"mappings":";;;;;;;EAwDE,OAAA;AACC,WAAA;AAAA;QAEE,WAAA;AAAA;QAEA,UAAA;AAAA,QACA,YAAA;AAAA;;;MAID,WAAA;AAAA;MAEA,eAAA;AAAA;AAAA;;MAIA,cAAA;AAAA;AAAA,MAEA,MAAA;AAAA;AAAA;MAGA,cAAA;AAAA,MACA,QAAA;AAAA,MACA,WAAA;AAAA,MACA,MAAA;AAAA;;;;;;IAOD;AAAA,IACA;AAAA;EAED,OAAA,QAAA;AACC,QAAA,OAAA,YAAA,KAAA,OAAA,WAAA;;AAEC,WAAA,YAAA,OAAA;;;AAGC,aAAA,UAAA,IAAA,QAAA,CAAA,EAAA;AACA,aAAA,QAAA,IAAA,QAAA,CAAA,EAAA;AACA,aAAA,YAAA,IAAA,QAAA,CAAA,EAAA;AAEA,aAAA,eAAA,IAAA,QAAA,CAAA,EAAA;AACA,aAAA,OAAA,IAAA,QAAA,CAAA,EAAA;AACA,aAAA,WAAA,IAAA,QAAA,CAAA,EAAA;AACA,aAAA,MACC,GAAA,IAAA,QAAA,CAAA,EAAA,WAAA,IAAA,IAAA,QAAA,CAAA,EAAA,OAAA,IAAA,IAAA,QAAA,CAAA,EAAA,WAAA;AAAA;IAEH;AACA,SAAA,WAAA;AAAA;EAED,SAAA;AAAA,IACC,OAAA;AACC,WAAA,UAAA;AAAA;;;AAIA,WAAA,eAAA,IAAA;AACA,WAAA,OAAA,IAAA;;AAEA,WAAA,UAAA;AAAA;IAED,SAAA;AACC,WAAA,UAAA;AAAA;;IAGD,OAAA;AAEC,UAAA,CAAA,KAAA,QAAA,CAAA,KAAA,SAAA,CAAA,KAAA,WAAA,CAAA,KAAA,gBAAA,CAAA,KAAA,QAAA,CAAA,KAAA,UAAA;AACCA,sBAAAA,MAAA,UAAA;AAAA,UACC,OAAA;AAAA;;;MAIF;;AAGCC,gCAAA;AAAA,UACC,SAAAC,eAAA,iBAAA,EAAA,OAAA,SAAA;AAAA;UAEA,MAAA,KAAA;AAAA;UAEA,QAAA,KAAA;AAAA,UACA,MAAA,KAAA;AAAA,UACA,QAAA,KAAA;AAAA;QAED,CAAA,EAAA,KAAA,CAAA,QAAA;AACC,eAAA,QAAA,GAAA;AAAA;;AAGDC,iCAAA;AAAA,UACC,IAAA,KAAA;AAAA,UACA,SAAAD,eAAA,iBAAA,EAAA,OAAA,SAAA;AAAA;UAEA,MAAA,KAAA;AAAA;UAEA,QAAA,KAAA;AAAA,UACA,MAAA,KAAA;AAAA,UACA,QAAA,KAAA;AAAA;QAED,CAAA,EAAA,KAAA,CAAA,QAAA;AACC,eAAA,QAAA,GAAA;AAAA;MAEF;AAAA;;AAGA,UAAA,IAAA,UAAA,KAAA;AACCF,sBAAAA,MAAA,aAAA;AAAA,UACC,OAAA;AAAA;AAEDA,sBAAAA,MAAA,UAAA;AAAA;;;AAIAA,sBAAAA,MAAA,UAAA;AAAA,UACC,OAAA,IAAA;AAAA;;MAGF;AAAA,IACD;AAAA;EAED,aAAA,GAAA;AACC,QAAA,EAAA,aAAA,IAAA;;IAEA;AACA,QAAA,EAAA,YAAA,IAAA;AACC,WAAA,UAAA,aAAA;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1LD,GAAG,WAAW,eAAe;"}