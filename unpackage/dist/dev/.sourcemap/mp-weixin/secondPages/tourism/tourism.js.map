{"version":3,"file":"tourism.js","sources":["secondPages/tourism/tourism.vue","E:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c2Vjb25kUGFnZXNcdG91cmlzbVx0b3VyaXNtLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<pageBack :titleInfo=\"titleInfo\"></pageBack>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"newsInfo\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t<image src=\"../../static/logo.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<text># 两岸旅游版块</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"infoContent\">\r\n\t\t\t\t{{list.length}} 篇内容 · 无论您是想单独游览台湾还是大陆,还是希望体验两岸之间的文化交流,这个板块都能为您提供全面的旅游信息和建议。欢迎您规划您的两岸旅行!\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"sort\">\r\n\r\n\t\t</view>\r\n\t\t<view class=\"news\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t<view v-for=\"(item,index) in titles\" :class=\"{active: currentIndex === index}\" @click=\"toSwiper(index)\">\r\n\t\t\t\t\t{{item}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<swiper :current=\"currentIndex\" @change=\"onSwiperChange\" :style=\"{ height: swiperHeight + 'px' }\">\r\n\t\t\t\t<swiper-item v-for=\"(item2,index) in newsGridNews\">\r\n\t\t\t\t\t<view class=\"itemBox\">\r\n\t\t\t\t\t\t<view class=\"item\" v-for=\"item in item2\" @click=\"toPage(item)\">\r\n\t\t\t\t\t\t\t<view class=\"itemLeft\">\r\n\t\t\t\t\t\t\t\t<view class=\"itemTitle\">\r\n\t\t\t\t\t\t\t\t\t{{item.title}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"itemInfo\">\r\n\t\t\t\t\t\t\t\t\t{{item.time}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"itemRight\">\r\n\t\t\t\t\t\t\t\t<image :lazy-load=\"true\" :src=\"item.imageUrl[0]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport pageBack from \"/components/title/title.vue\";\r\n\timport {\r\n\t\tgetindexGridTourismAPI\r\n\t} from \"@/apis/index.js\"\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitleInfo: {\r\n\t\t\t\t\ttitleShow: true,\r\n\t\t\t\t\ttitle: \"两岸旅游\",\r\n\t\t\t\t\timageUrl: \"http://t73sifiwt.hn-bkt.clouddn.com/pageBack/1.webp\",\r\n\t\t\t\t\theightShow: false,\r\n\t\t\t\t\tbackShow: true\r\n\t\t\t\t},\r\n\t\t\t\ttitles: [],\r\n\t\t\t\tcurrentIndex: 0, // 当前选中的标题索引\r\n\t\t\t\tlist: [{\r\n\t\t\t\t\ttitle: \"不止只有冰雕，几千年前的“东北人”还能把他整“活”了\",\r\n\t\t\t\t\ttime: \"2024/06/07\",\r\n\t\t\t\t\timageUrl: \"/static/logo.png\"\r\n\t\t\t\t}],\r\n\t\t\t\tswiperHeight: 0,\r\n\t\t\t\tgridNews: {},\r\n\t\t\t\tnewsGridNews: [{}, {}, {}],\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tpageBack\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthis.pageType = option.pageType\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tgetindexGridTourismAPI().then((res) => {\r\n\t\t\t\t// map遍历操作\r\n\t\t\t\tthis.list = res.message.map((item) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t// 解析图片字符串\r\n\t\t\t\t\t\timageUrl: JSON.parse(item.imageUrl),\r\n\t\t\t\t\t\t// 调用formatDate函数解析时间\r\n\t\t\t\t\t\ttime: this.formatDate(item.time)\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\t// map将数据中的所有分类提取出 ，filter过滤掉undefined，使用set去重\r\n\t\t\t\tthis.titles = [...new Set(this.list.map(item => item.grid))].filter(grid => grid !== undefined);\r\n\t\t\t\tthis.list.forEach(item => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tgrid\r\n\t\t\t\t\t} = item;\r\n\t\t\t\t\tif (!this.gridNews[grid]) {\r\n\t\t\t\t\t\tthis.gridNews[grid] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.gridNews[grid].push(item);\r\n\t\t\t\t});\r\n\t\t\t\tthis.newsGridNews = Object.values(this.gridNews)\r\n\t\t\t\tthis.toSwiper(0)\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttoSwiper(index) {\r\n\t\t\t\tthis.currentIndex = index;\r\n\t\t\t\tthis.getItemHeight(this.newsGridNews[index].length)\r\n\t\t\t},\r\n\t\t\tonSwiperChange(e) {\r\n\t\t\t\tthis.currentIndex = e.detail.current;\r\n\t\t\t\tthis.getItemHeight(this.newsGridNews[e.detail.current].length)\r\n\t\t\t},\r\n\t\t\tgetItemHeight(count) {\r\n\t\t\t\tconst query = uni.createSelectorQuery().in(this)\r\n\t\t\t\tquery.select('.itemBox').boundingClientRect(data => {\r\n\t\t\t\t\t// this.swiperHeight = this.list.length * data.height\r\n\t\t\t\t\tthis.swiperHeight = count * data.height\r\n\t\t\t\t}).exec()\r\n\t\t\t},\r\n\t\t\tformatDate(isoDate) {\r\n\t\t\t\tconst date = new Date(isoDate);\r\n\t\t\t\tconst year = date.getFullYear();\r\n\t\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0'); // 月份从0开始，所以加1\r\n\t\t\t\tconst day = String(date.getDate()).padStart(2, '0');\r\n\t\t\t\tconst hours = String(date.getHours()).padStart(2, '0');\r\n\t\t\t\tconst minutes = String(date.getMinutes()).padStart(2, '0');\r\n\t\t\t\tconst seconds = String(date.getSeconds()).padStart(2, '0');\r\n\t\t\t\treturn `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n\t\t\t},\r\n\t\t\ttoPage(item) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tgrid,\r\n\t\t\t\t\tid\r\n\t\t\t\t} = item\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/secondPages/gridDetail/gridDetail?pageType=${this.pageType}&pageId=${id}&pageGrid=${grid}`\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tif (e.scrollTop >= 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = true\r\n\t\t\t}\r\n\t\t\tif (e.scrollTop < 80) {\r\n\t\t\t\tthis.titleInfo.heightShow = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.content {\r\n\t\tpadding-bottom: 200rpx;\r\n\t\tposition: relative;\r\n\t\ttop: 200rpx;\r\n\t\twidth: 100%;\r\n\t\tmin-height: 300rpx;\r\n\t\tbackground-color: rgb(255, 251, 241);\r\n\t\tborder-radius: 40rpx 40rpx 0 0;\r\n\t\toverflow: hidden;\r\n\t\tpadding: 40rpx 0;\r\n\r\n\t\t.newsInfo {\r\n\t\t\twidth: 90%;\r\n\t\t\tmargin: auto;\r\n\t\t\tfont-family: \"妈祖祖庙\" !important;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tcolor: #4d0000;\r\n\t\t\t\tfont-size: 36rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\tborder-radius: 100%;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.infoContent {\r\n\t\t\t\tpadding: 10rpx 0;\r\n\t\t\t\tcolor: #9d9d9d;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\ttext-indent: 2em;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.sort {\r\n\t\t\twidth: 90%;\r\n\t\t\tmargin: auto;\r\n\t\t\theight: 60rpx;\r\n\t\t}\r\n\r\n\t\t.news {\r\n\t\t\twidth: 90%;\r\n\t\t\tmargin: auto;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\toverflow-x: auto;\r\n\t\t\t\t-webkit-overflow-scrolling: touch;\r\n\t\t\t\tscrollbar-width: none;\r\n\t\t\t\t/* Firefox */\r\n\t\t\t\t-ms-overflow-style: none;\r\n\t\t\t\t/* IE and Edge */\r\n\r\n\t\t\t\t&::-webkit-scrollbar {\r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t\t/* Chrome, Safari, Opera */\r\n\t\t\t\t}\r\n\r\n\t\t\t\tview {\r\n\t\t\t\t\tflex-shrink: 0;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\tfont-family: \"妈祖祖庙\", sans-serif;\r\n\t\t\t\t\tpadding: 10rpx 20rpx;\r\n\t\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tview.active {\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.itemBox {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 160rpx;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\r\n\t\t\t\t.item {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 160rpx;\r\n\t\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\t\tborder-bottom: 2rpx solid #eeeeee;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t.itemLeft {\r\n\t\t\t\t\t\twidth: 70%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t\t\t.itemTitle {\r\n\t\t\t\t\t\t\tfont-family: \"阿里妈妈方圆体 VF Regular\" !important;\r\n\t\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\t\tmargin-top: 25rpx;\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tletter-spacing: 2rpx;\r\n\t\t\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\t\tline-height: 36rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.itemInfo {\r\n\t\t\t\t\t\t\tcolor: #9d9d9d;\r\n\t\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\t\tmargin-bottom: 25rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.itemRight {\r\n\t\t\t\t\t\twidth: 25%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\twidth: 140rpx;\r\n\t\t\t\t\t\t\theight: 140rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/01前端学习/01fzhx/mazu-2/mazu-2/mazu-前端小程序/secondPages/tourism/tourism.vue'\nwx.createPage(MiniProgramPage)"],"names":["getindexGridTourismAPI","uni"],"mappings":";;;;;;EAkDE,OAAA;AACC,WAAA;AAAA;QAEE,WAAA;AAAA;QAEA,UAAA;AAAA,QACA,YAAA;AAAA;;MAGD,QAAA,CAAA;AAAA;;MAEA,MAAA,CAAA;AAAA,QACC,OAAA;AAAA,QACA,MAAA;AAAA;MAED,CAAA;AAAA,MACA,cAAA;AAAA;;;;;IAMD;AAAA;EAED,OAAA,QAAA;;;EAGA,UAAA;AACCA,sCAAA,EAAA,KAAA,CAAA,QAAA;AAEC,WAAA,OAAA,IAAA,QAAA,IAAA,CAAA,SAAA;AACC,eAAA;AAAA,UACC,GAAA;AAAA;AAAA,UAEA,UAAA,KAAA,MAAA,KAAA,QAAA;AAAA;AAAA,UAEA,MAAA,KAAA,WAAA,KAAA,IAAA;AAAA;MAEF,CAAA;AAEA,WAAA,SAAA,CAAA,GAAA,IAAA,IAAA,KAAA,KAAA,IAAA,UAAA,KAAA,IAAA,CAAA,CAAA,EAAA,OAAA,UAAA,SAAA,MAAA;;;UAGE;AAAA,QACD,IAAA;;;QAGA;AACA,aAAA,SAAA,IAAA,EAAA,KAAA,IAAA;AAAA,MACD,CAAA;AACA,WAAA,eAAA,OAAA,OAAA,KAAA,QAAA;AACA,WAAA,SAAA,CAAA;AAAA,IACD,CAAA;AAAA;EAED,SAAA;AAAA,IACC,SAAA,OAAA;;;;IAIA,eAAA,GAAA;AACC,WAAA,eAAA,EAAA,OAAA;;;IAGD,cAAA,OAAA;AACC,YAAA,QAAAC,cAAA,MAAA,oBAAA,EAAA,GAAA,IAAA;;AAGC,aAAA,eAAA,QAAA,KAAA;AAAA,MACD,CAAA,EAAA,KAAA;AAAA;IAED,WAAA,SAAA;;;AAGC,YAAA,QAAA,OAAA,KAAA,SAAA,IAAA,CAAA,EAAA,SAAA,GAAA,GAAA;;;;;;;;;;;;AAYAA,oBAAAA,MAAA,WAAA;AAAA;;IAGD;AAAA;EAED,aAAA,GAAA;AACC,QAAA,EAAA,aAAA,IAAA;;IAEA;AACA,QAAA,EAAA,YAAA,IAAA;AACC,WAAA,UAAA,aAAA;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJD,GAAG,WAAW,eAAe;"}