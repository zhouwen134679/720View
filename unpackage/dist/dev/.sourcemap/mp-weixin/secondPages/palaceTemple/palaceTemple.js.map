{"version":3,"file":"palaceTemple.js","sources":["secondPages/palaceTemple/palaceTemple.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c2Vjb25kUGFnZXNccGFsYWNlVGVtcGxlXHBhbGFjZVRlbXBsZS52dWU"],"sourcesContent":["<template>\r\n\t<pageBack :titleInfo=\"titleInfo\"></pageBack>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"newsInfo\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t<image src=\"../../static/logo.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<text># 天下宫庙版块</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"infoContent\">{{ list.length }} 篇内容 · 通过这个板块,您可以一窥世界各地最富盛名的妈祖文化建筑,感受人类文明发展的历史足迹。</view>\r\n\t\t</view>\r\n\t\t<view class=\"sort\"></view>\r\n\t\t<view class=\"news\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t<view v-for=\"(item, index) in titles\" :class=\"{ active: currentIndex === index }\" @click=\"toSwiper(index)\">\r\n\t\t\t\t\t{{ item }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<swiper :current=\"currentIndex\" @change=\"onSwiperChange\" :style=\"{ height: swiperHeight + 'px' }\">\r\n\t\t\t\t<swiper-item v-for=\"(item2, index) in newsGridNews\">\r\n\t\t\t\t\t<view class=\"itemBox\">\r\n\t\t\t\t\t\t<view class=\"item\" v-for=\"item in item2\" @click=\"toPage(item)\">\r\n\t\t\t\t\t\t\t<view class=\"itemLeft\">\r\n\t\t\t\t\t\t\t\t<view class=\"itemTitle\">\r\n\t\t\t\t\t\t\t\t\t{{ item.title }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"itemInfo\">\r\n\t\t\t\t\t\t\t\t\t{{ item.time }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"itemRight\">\r\n\t\t\t\t\t\t\t\t<image :lazy-load=\"true\" :src=\"item.imageUrl[0]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\nimport pageBack from '/components/title/title.vue';\r\nimport { getindexGridPalaceTempleAPI } from '@/apis/index.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttitleInfo: {\r\n\t\t\t\ttitleShow: true,\r\n\t\t\t\ttitle: '天下宫庙',\r\n\t\t\t\timageUrl: 'http://t73sifiwt.hn-bkt.clouddn.com/pageBack/1.webp',\r\n\t\t\t\theightShow: false,\r\n\t\t\t\tbackShow: true\r\n\t\t\t},\r\n\t\t\ttitles: [],\r\n\t\t\tcurrentIndex: 0, // 当前选中的标题索引\r\n\t\t\tlist: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: '不止只有冰雕，几千年前的“东北人”还能把他整“活”了',\r\n\t\t\t\t\ttime: '2024/06/07',\r\n\t\t\t\t\timageUrl: '/static/logo.png'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tswiperHeight: 0,\r\n\t\t\tgridNews: {},\r\n\t\t\tnewsGridNews: [{}, {}, {}]\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tpageBack\r\n\t},\r\n\tonLoad(option) {\r\n\t\tthis.pageType = option.pageType;\r\n\t},\r\n\tonReady() {\r\n\t\tgetindexGridPalaceTempleAPI().then((res) => {\r\n\t\t\tconst validList = res.message.filter((item) => item.grid); // ✅ 确保每条有 grid\r\n\r\n\t\t\tthis.list = validList.map((item) => ({\r\n\t\t\t\t...item,\r\n\t\t\t\timageUrl: JSON.parse(item.imageUrl),\r\n\t\t\t\ttime: this.formatDate(item.time)\r\n\t\t\t}));\r\n\r\n\t\t\t// 提取分类\r\n\t\t\tthis.titles = [...new Set(this.list.map((item) => item.grid))];\r\n\r\n\t\t\t// 组装 gridNews\r\n\t\t\tthis.gridNews = {};\r\n\t\t\tthis.list.forEach((item) => {\r\n\t\t\t\tconst { grid } = item;\r\n\t\t\t\tif (!this.gridNews[grid]) this.gridNews[grid] = [];\r\n\t\t\t\tthis.gridNews[grid].push(item);\r\n\t\t\t});\r\n\r\n\t\t\tthis.newsGridNews = Object.values(this.gridNews);\r\n\t\t\tif (this.newsGridNews.length > 0) {\r\n\t\t\t\tthis.toSwiper(0);\r\n\t\t\t} else {\r\n\t\t\t\tthis.swiperHeight = 0; // 没数据防止报错\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\ttoSwiper(index) {\r\n\t\t\tthis.currentIndex = index;\r\n\t\t\tthis.getItemHeight(this.newsGridNews[index].length);\r\n\t\t},\r\n\t\tonSwiperChange(e) {\r\n\t\t\tthis.currentIndex = e.detail.current;\r\n\t\t\tthis.getItemHeight(this.newsGridNews[e.detail.current].length);\r\n\t\t},\r\n\t\tgetItemHeight(count) {\r\n\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\tquery\r\n\t\t\t\t.select('.itemBox')\r\n\t\t\t\t.boundingClientRect((data) => {\r\n\t\t\t\t\t// this.swiperHeight = this.list.length * data.height\r\n\t\t\t\t\tthis.swiperHeight = count * data.height;\r\n\t\t\t\t})\r\n\t\t\t\t.exec();\r\n\t\t},\r\n\t\tformatDate(isoDate) {\r\n\t\t\tconst date = new Date(isoDate);\r\n\t\t\tconst year = date.getFullYear();\r\n\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0'); // 月份从0开始，所以加1\r\n\t\t\tconst day = String(date.getDate()).padStart(2, '0');\r\n\t\t\tconst hours = String(date.getHours()).padStart(2, '0');\r\n\t\t\tconst minutes = String(date.getMinutes()).padStart(2, '0');\r\n\t\t\tconst seconds = String(date.getSeconds()).padStart(2, '0');\r\n\t\t\treturn `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n\t\t},\r\n\t\ttoPage(item) {\r\n\t\t\tconst { grid, id } = item;\r\n\t\t\t\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/secondPages/gridDetail/gridDetail?pageType=${this.pageType}&pageId=${id}&pageGrid=${grid}`\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tonPageScroll(e) {\r\n\t\tif (e.scrollTop >= 80) {\r\n\t\t\tthis.titleInfo.heightShow = true;\r\n\t\t}\r\n\t\tif (e.scrollTop < 80) {\r\n\t\t\tthis.titleInfo.heightShow = false;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.content {\r\n\tpadding-bottom: 200rpx;\r\n\tposition: relative;\r\n\ttop: 200rpx;\r\n\twidth: 100%;\r\n\tmin-height: 300rpx;\r\n\tbackground-color: rgb(255, 251, 241);\r\n\tborder-radius: 40rpx 40rpx 0 0;\r\n\toverflow: hidden;\r\n\tpadding: 40rpx 0;\r\n\r\n\t.newsInfo {\r\n\t\twidth: 90%;\r\n\t\tmargin: auto;\r\n\t\tfont-family: '妈祖祖庙' !important;\r\n\r\n\t\t.title {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tcolor: #4d0000;\r\n\t\t\tfont-size: 36rpx;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 40rpx;\r\n\t\t\t\theight: 40rpx;\r\n\t\t\t\tborder-radius: 100%;\r\n\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.infoContent {\r\n\t\t\tpadding: 10rpx 0;\r\n\t\t\tcolor: #9d9d9d;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\ttext-indent: 2em;\r\n\t\t}\r\n\t}\r\n\r\n\t.sort {\r\n\t\twidth: 90%;\r\n\t\tmargin: auto;\r\n\t\theight: 60rpx;\r\n\t}\r\n\r\n\t.news {\r\n\t\twidth: 90%;\r\n\t\tmargin: auto;\r\n\r\n\t\t.title {\r\n\t\t\tdisplay: flex;\r\n\t\t\toverflow-x: auto;\r\n\t\t\t-webkit-overflow-scrolling: touch;\r\n\t\t\tscrollbar-width: none;\r\n\t\t\t/* Firefox */\r\n\t\t\t-ms-overflow-style: none;\r\n\t\t\t/* IE and Edge */\r\n\r\n\t\t\t&::-webkit-scrollbar {\r\n\t\t\t\tdisplay: none;\r\n\t\t\t\t/* Chrome, Safari, Opera */\r\n\t\t\t}\r\n\r\n\t\t\tview {\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tfont-family: '妈祖祖庙', sans-serif;\r\n\t\t\t\tpadding: 10rpx 20rpx;\r\n\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t}\r\n\r\n\t\t\tview.active {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground-color: #4d0000;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.itemBox {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 160rpx;\r\n\t\t\tpadding: 20rpx 0;\r\n\r\n\t\t\t.item {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 160rpx;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\tborder-bottom: 2rpx solid #eeeeee;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.itemLeft {\r\n\t\t\t\t\twidth: 70%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t\t.itemTitle {\r\n\t\t\t\t\t\tfont-family: '阿里妈妈方圆体 VF Regular' !important;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\tmargin-top: 25rpx;\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tletter-spacing: 2rpx;\r\n\t\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\tline-height: 36rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.itemInfo {\r\n\t\t\t\t\t\tcolor: #9d9d9d;\r\n\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\tmargin-bottom: 25rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.itemRight {\r\n\t\t\t\t\twidth: 25%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 140rpx;\r\n\t\t\t\t\t\theight: 140rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/18706/Desktop/MZ/mazu-前端小程序/secondPages/palaceTemple/palaceTemple.vue'\nwx.createPage(MiniProgramPage)"],"names":["getindexGridPalaceTempleAPI","uni"],"mappings":";;;;AAwCA,MAAA,WAAA,MAAA;AAGA,MAAA,YAAA;AAAA,EACC,OAAA;AACC,WAAA;AAAA;QAEE,WAAA;AAAA;QAEA,UAAA;AAAA,QACA,YAAA;AAAA;;MAGD,QAAA,CAAA;AAAA;;;QAGC;AAAA,UACC,OAAA;AAAA,UACA,MAAA;AAAA;QAED;AAAA;MAED,cAAA;AAAA;;;;;IAMD;AAAA;EAED,OAAA,QAAA;;;EAGA,UAAA;AACCA,2CAAA,EAAA,KAAA,CAAA,QAAA;AACC,YAAA,YAAA,IAAA,QAAA,OAAA,CAAA,SAAA,KAAA,IAAA;AAEA,WAAA,OAAA,UAAA,IAAA,CAAA,UAAA;AAAA,QACC,GAAA;AAAA,QACA,UAAA,KAAA,MAAA,KAAA,QAAA;AAAA,QACA,MAAA,KAAA,WAAA,KAAA,IAAA;AAAA,MACD,EAAA;;AAMA,WAAA,WAAA;;AAEC,cAAA,EAAA,KAAA,IAAA;;;AAEA,aAAA,SAAA,IAAA,EAAA,KAAA,IAAA;AAAA,MACD,CAAA;;AAGA,UAAA,KAAA,aAAA,SAAA,GAAA;AACC,aAAA,SAAA,CAAA;AAAA;;MAGD;AAAA,IACD,CAAA;AAAA;EAED,SAAA;AAAA,IACC,SAAA,OAAA;;;;IAIA,eAAA,GAAA;AACC,WAAA,eAAA,EAAA,OAAA;AACA,WAAA,cAAA,KAAA,aAAA,EAAA,OAAA,OAAA,EAAA,MAAA;AAAA;IAED,cAAA,OAAA;AACC,YAAA,QAAAC,cAAAA,MAAA,oBAAA,EAAA,GAAA,IAAA;YAEC,OAAA,UAAA;AAGC,aAAA,eAAA,QAAA,KAAA;AAAA,SAED;;IAEF,WAAA,SAAA;;;AAGC,YAAA,QAAA,OAAA,KAAA,SAAA,IAAA,CAAA,EAAA,SAAA,GAAA,GAAA;;;;;;;;AAQA,YAAA,EAAA,MAAA,GAAA,IAAA;AAEAA,oBAAAA,MAAA,WAAA;AAAA;MAEA,CAAA;AAAA,IACD;AAAA;EAED,aAAA,GAAA;AACC,QAAA,EAAA,aAAA,IAAA;AACC,WAAA,UAAA,aAAA;AAAA,IACD;AACA,QAAA,EAAA,YAAA,IAAA;AACC,WAAA,UAAA,aAAA;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClJA,GAAG,WAAW,eAAe;"}